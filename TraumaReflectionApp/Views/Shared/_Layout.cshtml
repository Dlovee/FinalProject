@using Microsoft.AspNetCore.Http

@{
    var routeController = ViewContext.RouteData.Values["controller"]?.ToString() ?? "";
    var routeAction = ViewContext.RouteData.Values["action"]?.ToString() ?? "";

    var isRegisterPage = routeController == "User" && routeAction == "Register";
    var isLoginPage = routeController == "User" && routeAction == "Login";

    var userId = Context?.Session.GetInt32("UserID");
    var isLoggedIn = userId != null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - TraumaReflectionApp</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />

    <link rel="stylesheet" href="~/css/site.css" />

    <style>
        html {
            overscroll-behavior: none;
            background-color: #ffb07a; /* fallback */
        }

        body {
            background: linear-gradient(
                135deg,
                #ffe8d6 0%,
                #ffc8a3 33%,
                #ffb07a 66%,
                #ff9f5a 100%
            );
            min-height: 100vh;
        }


        /* ⭐ This line fixes the horizontal split at the bottom */
        body {
            min-height: 100vh;
        }

        .page-section {
            max-width: 700px;
            margin: 0 auto;
            padding-top: 40px;
            padding-bottom: 40px;
        }

        .gray-card {
            background-color: #bfbfbf;
            border-radius: 8px;
            padding: 20px;
        }
    </style>
    <style>
    .hover-card {
        transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .hover-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    }

    /* ⭐ SPECIFIC FIX: This changes the white reflection cards */
    .card {
        background-color: #bfbfbf !important;
    }
</style>
</head>

<body>

<nav class="navbar navbar-expand-sm box-shadow mb-3"
     style="background: linear-gradient(135deg, #292323, #1a1a1a);">
    <div class="container">

        <!-- Left side: App name -->
        <a class="navbar-brand fw-bold text-white" 
           asp-area="" asp-controller="Home" asp-action="Index">
            TraumaReflectionApp
        </a>

        <!-- Right side: Profile + Logout (only when logged in) -->
        <div class="d-flex ms-auto">

            @if (isLoggedIn)
            {
                <a asp-controller="User" asp-action="Profile"
                   class="nav-link text-white me-3">
                    Profile
                </a>

                <a asp-controller="User" asp-action="Logout"
                   class="nav-link text-white">
                    Logout
                </a>
            }
        </div>

    </div>
</nav>

<div class="mt-4">
    @RenderBody()
</div>

@RenderSection("Scripts", required: false)

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
